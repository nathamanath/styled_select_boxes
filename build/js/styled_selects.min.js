/*! styled_selects 2013-11-18 */
(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};this.StyledSelects=function(){function b(b,c){this.optionClicked=a(this.optionClicked,this),this.documnentClicked=a(this.documnentClicked,this),this.selectClicked=a(this.selectClicked,this),this.fireChangeEvent=a(this.fireChangeEvent,this),this.el=b,this.options=[],this.width=this.el.offsetWidth,console.log(this.width),this.instanceId=c,this.optionsHTML="",this.hideOrigional(),this.getOptions(),this.selectedOption=this.getSelected(),this.open=!1,this.render()}return b.elements=[],b.selects=[],b.init=function(a){var b,c,d;if(a instanceof Object)for(c=0,d=a.length;d>c;c++)b=a[c],this.selects.push(new this(b,this.selects.length));else this.selects.push(new this(a,this.selects.length));return document.addEventListener("click",this.click,!1)},b.click=function(a){var c,d;return d=a.target,"styled_select_selected"===d.className?(c=d.parentNode.getAttribute("data-styled-select-id"),b.selects[c].selectClicked()):"styled_select_option"===d.className?(c=d.parentNode.parentNode.getAttribute("data-styled-select-id"),b.selects[c].optionClicked(d)):void 0},b.prototype.template=function(){return'<section  id="styled_select_'+this.el.id+'"\n          style="width:'+this.width+'px;"\n          data-styled-select-id="'+this.instanceId+'"\n          data-parent-id="'+this.el.id+'"\n          class="styled_select">\n\n  <span class="styled_select_selected">'+this.selectedOption.innerHTML+'</span>\n    <ul class="styled_select_options">\n      '+this.optionsHTML+"\n    </ul>\n</section>"},b.prototype.getOptions=function(){var a,b,c,d,e,f,g,h;for(a=0,g=this.el.options,h=[],e=0,f=g.length;f>e;e++)c=g[e],d=c.value,b=c.innerHTML,this.optionsHTML+=this.optionTemplate(a,d,b),h.push(a++);return h},b.prototype.getSelected=function(){var a,b,c,d,e;for(b=!1,e=this.el.options,c=0,d=e.length;d>c;c++)if(a=e[c],a.hasAttribute("selected"))return a;return b?b:this.el.hasAttribute("data-placeholder")?a={value:null,innerHTML:this.el.getAttribute("data-placeholder")}:this.el.options[0]},b.prototype.setSelected=function(a){return document.getElementById(this.el.id).selectedIndex=a,this.self.querySelector("span").innerHTML=this.el.options[a].innerHTML},b.prototype.optionTemplate=function(a,b,c){return'<li class="styled_select_option"\n  data-option-index="'+a+'"\n  data-value="'+b+'">\n  '+c+"\n</li>"},b.prototype.render=function(){return this.self=document.createElement("div"),this.self.id="styled_select_"+this.el.id,this.self.className="styled_select_wrapper",this.self.innerHTML=this.template(),this.self.style.width=this.width+"px",this.el.parentNode.appendChild(this.self)},b.prototype.hideOrigional=function(){return this.el.style.width=0,this.el.style.height=0,this.el.style.opacity=0,this.el.style.margin=0,this.el.style.padding=0},b.prototype.fireChangeEvent=function(){var a;return document.createEvent?(a=document.createEvent("Events"),a.initEvent("change",!0,!1),this.el.dispatchEvent(a)):document.createEventObject?this.el.fireEvent("onchange"):"function"==typeof this.el.onchange?this.el.onchange():void 0},b.prototype.isOpen=function(){return this.open},b.prototype.openSelect=function(){return this.open=!0,this.self.querySelector(".styled_select").className+=" open"},b.prototype.closeSelect=function(){var a;return this.open=!1,a=this.self.querySelector(".styled_select"),a.className=a.className.replace(/(\s)?open/,"")},b.prototype.selectClicked=function(){return this.isOpen()?this.closeSelect():this.openSelect()},b.prototype.documnentClicked=function(a){var b;return b=a.target.className,b.match(/(styled_select_selected|styled_select_option)/)?void 0:this.selectClicked()},b.prototype.optionClicked=function(a){return this.selectedValue=a.innerHTML,this.setSelected(a.getAttribute("data-option-index")),this.selectClicked(),this.fireChangeEvent()},b}.call(this)}).call(this);